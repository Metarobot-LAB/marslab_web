<style>
  /* 드롭다운 메뉴 스타일 - 기본적으로 숨김 */
  .custom-dropdown-menu {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    position: absolute !important;
    top: 100% !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    background: #fff !important;
    min-width: 160px !important;
    box-shadow: 0 4px 15px rgba(0,0,0,0.15) !important;
    border: 1px solid #eee !important;
    border-radius: 8px !important;
    z-index: 99999 !important;
    padding: 8px 0 !important;
    list-style: none !important;
    margin-top: 10px !important;
    margin-left: 0 !important;
    transition: opacity 0.2s ease-in-out !important;
  }

  .custom-dropdown-menu::before {
    content: '' !important;
    position: absolute !important;
    top: -6px !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    border-left: 6px solid transparent !important;
    border-right: 6px solid transparent !important;
    border-bottom: 6px solid #fff !important;
  }

  .custom-dropdown-menu li {
    margin: 0 !important;
    padding: 0 !important;
    display: block !important;
    text-align: center !important;
  }

  .custom-dropdown-menu a {
    display: block !important;
    padding: 10px 20px !important;
    color: #333 !important;
    text-decoration: none !important;
    font-size: 0.95em !important;
    font-weight: 500 !important;
    transition: background 0.2s !important;
  }

  .custom-dropdown-menu a:hover {
    background-color: #f5f7fa !important;
    color: #000 !important;
  }

  .has-dropdown {
    position: relative !important;
  }

  /* 호버 시에만 드롭다운 표시 */
  .has-dropdown:hover .custom-dropdown-menu {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    animation: fadeIn 0.2s ease-in-out !important;
  }

  /* 호버가 아닐 때는 확실히 숨김 */
  .has-dropdown:not(:hover) .custom-dropdown-menu {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translate(-50%, -10px); }
    to { opacity: 1; transform: translate(-50%, 0); }
  }

  /* 상단바 넘침 허용 (드롭다운이 잘리지 않게 함) */
  .masthead, .masthead__inner-wrap, .greedy-nav {
    overflow: visible !important;
  }
</style>

<script>
(function() {
  function setupPeopleDropdown() {
    console.log('Setting up People dropdown...');
    
    // 모든 링크를 확인
    const allLinks = document.querySelectorAll('a');
    let peopleLink = null;
    let peopleItem = null;
    
    for (let link of allLinks) {
      const text = link.textContent.trim();
      if (text === 'People') {
        peopleLink = link;
        peopleItem = link.closest('li') || link.parentElement || link.parentNode;
        console.log('Found People link:', link, 'Parent:', peopleItem);
        break;
      }
    }
    
    if (!peopleLink) {
      console.log('People link not found, will retry...');
      return false;
    }
    
    if (!peopleItem) {
      console.log('People parent item not found');
      return false;
    }
    
    // 이미 설정되어 있으면 스킵
    if (peopleItem.classList.contains('has-dropdown') && peopleItem.querySelector('.custom-dropdown-menu')) {
      console.log('Already set up');
      return true;
    }
    
    // 클래스 추가
    peopleItem.classList.add('has-dropdown');
    peopleItem.style.position = 'relative';
    
    // 링크 기능 비활성화 (클릭 시 이동 방지)
    peopleLink.href = 'javascript:void(0);';
    peopleLink.style.cursor = 'default';
    
    // 클릭 이벤트 차단 (최소한으로)
    peopleLink.addEventListener('click', function(e) {
      e.preventDefault();
      return false;
    });
    
    // 드롭다운 생성 (기본적으로 숨김 상태)
    if (!peopleItem.querySelector('.custom-dropdown-menu')) {
      const dropdownUl = document.createElement('ul');
      dropdownUl.className = 'custom-dropdown-menu';
      dropdownUl.style.display = 'none';
      dropdownUl.style.visibility = 'hidden';
      dropdownUl.style.opacity = '0';
      // 상대 경로 사용 (하드코딩 제거)
      dropdownUl.innerHTML = '<li><a href="./professor/">Professor</a></li><li><a href="./students/">Students</a></li>';
      peopleItem.appendChild(dropdownUl);
      console.log('Dropdown menu created (hidden by default)');
    }

    // 호버 이벤트로만 표시
    const dropdown = peopleItem.querySelector('.custom-dropdown-menu');
    function showDropdown() {
      if (!dropdown) return;
      dropdown.style.display = 'block';
      dropdown.style.visibility = 'visible';
      dropdown.style.opacity = '1';
    }
    function hideDropdown() {
      if (!dropdown) return;
      dropdown.style.display = 'none';
      dropdown.style.visibility = 'hidden';
      dropdown.style.opacity = '0';
    }
    peopleItem.addEventListener('mouseenter', showDropdown);
    peopleItem.addEventListener('mouseleave', hideDropdown);
    peopleLink.addEventListener('mouseenter', showDropdown);
    if (dropdown) {
      dropdown.addEventListener('mouseenter', showDropdown);
      dropdown.addEventListener('mouseleave', hideDropdown);
    }
    
    console.log('People dropdown setup complete');
    return true;
  }
  
  // DOMContentLoaded에서 한 번만 실행
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function() {
      setupPeopleDropdown();
    });
  } else {
    setupPeopleDropdown();
  }
})();
</script>
