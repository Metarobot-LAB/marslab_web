<style>
  /* 드롭다운 메뉴 스타일 - 강화 버전 */
  .custom-dropdown-menu {
    display: none !important;
    position: absolute !important;
    top: 100% !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    background: #fff !important;
    min-width: 160px !important;
    box-shadow: 0 4px 15px rgba(0,0,0,0.15) !important;
    border: 1px solid #eee !important;
    border-radius: 8px !important;
    z-index: 99999 !important;
    padding: 8px 0 !important;
    list-style: none !important;
    margin-top: 10px !important;
    margin-left: 0 !important;
  }

  .custom-dropdown-menu::before {
    content: '' !important;
    position: absolute !important;
    top: -6px !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    border-left: 6px solid transparent !important;
    border-right: 6px solid transparent !important;
    border-bottom: 6px solid #fff !important;
  }

  .custom-dropdown-menu li {
    margin: 0 !important;
    padding: 0 !important;
    display: block !important;
    text-align: center !important;
  }

  .custom-dropdown-menu a {
    display: block !important;
    padding: 10px 20px !important;
    color: #333 !important;
    text-decoration: none !important;
    font-size: 0.95em !important;
    font-weight: 500 !important;
    transition: background 0.2s !important;
  }

  .custom-dropdown-menu a:hover {
    background-color: #f5f7fa !important;
    color: #000 !important;
  }

  .has-dropdown {
    position: relative !important;
  }

  .has-dropdown:hover .custom-dropdown-menu {
    display: block !important;
    animation: fadeIn 0.2s ease-in-out !important;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translate(-50%, -10px); }
    to { opacity: 1; transform: translate(-50%, 0); }
  }
</style>

<script>
(function() {
  function setupPeopleDropdown() {
    console.log('Setting up People dropdown...');
    
    // 모든 링크를 확인
    const allLinks = document.querySelectorAll('a');
    let peopleLink = null;
    let peopleItem = null;
    
    for (let link of allLinks) {
      const text = link.textContent.trim();
      if (text === 'People') {
        peopleLink = link;
        peopleItem = link.closest('li') || link.parentElement || link.parentNode;
        console.log('Found People link:', link, 'Parent:', peopleItem);
        break;
      }
    }
    
    if (!peopleLink) {
      console.log('People link not found, will retry...');
      return false;
    }
    
    if (!peopleItem) {
      console.log('People parent item not found');
      return false;
    }
    
    // 이미 설정되어 있으면 스킵
    if (peopleItem.classList.contains('has-dropdown') && peopleItem.querySelector('.custom-dropdown-menu')) {
      console.log('Already set up');
      return true;
    }
    
    // 클래스 추가
    peopleItem.classList.add('has-dropdown');
    peopleItem.style.position = 'relative';
    
    // 클릭 완전 차단
    peopleLink.href = 'javascript:void(0);';
    peopleLink.style.cursor = 'default';
    peopleLink.style.pointerEvents = 'none';
    
    // 여러 방법으로 클릭 차단
    peopleLink.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      e.stopImmediatePropagation();
      return false;
    }, true);
    
    peopleLink.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      return false;
    }, false);
    
    peopleLink.onclick = function(e) {
      e.preventDefault();
      return false;
    };
    
    // 드롭다운 생성
    if (!peopleItem.querySelector('.custom-dropdown-menu')) {
      const dropdownUl = document.createElement('ul');
      dropdownUl.className = 'custom-dropdown-menu';
      dropdownUl.innerHTML = '<li><a href="/mars.github.io/professor/">Professor</a></li><li><a href="/mars.github.io/students/">Students</a></li>';
      peopleItem.appendChild(dropdownUl);
      console.log('Dropdown menu created');
    }
    
    console.log('People dropdown setup complete');
    return true;
  }
  
  // 즉시 실행
  if (setupPeopleDropdown()) {
    console.log('Setup successful on first try');
  } else {
    // DOMContentLoaded에서 실행
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', function() {
        setTimeout(setupPeopleDropdown, 100);
        setTimeout(setupPeopleDropdown, 500);
        setTimeout(setupPeopleDropdown, 1000);
      });
    } else {
      setTimeout(setupPeopleDropdown, 100);
      setTimeout(setupPeopleDropdown, 500);
      setTimeout(setupPeopleDropdown, 1000);
    }
    
    // 추가 지연 실행
    setTimeout(setupPeopleDropdown, 2000);
    setTimeout(setupPeopleDropdown, 3000);
    
    // MutationObserver로 DOM 변경 감지
    const observer = new MutationObserver(function() {
      setupPeopleDropdown();
    });
    
    observer.observe(document.body, {
      childList: true,
      subtree: true
    });
  }
})();
</script>
