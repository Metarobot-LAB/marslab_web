<style>
  /* 드롭다운 메뉴 스타일 - 기본적으로 숨김 */
  .custom-dropdown-menu {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    position: absolute !important;
    top: 100% !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    background: #fff !important;
    min-width: 160px !important;
    box-shadow: 0 4px 15px rgba(0,0,0,0.15) !important;
    border: 1px solid #eee !important;
    border-radius: 8px !important;
    z-index: 999999 !important;
    padding: 8px 0 !important;
    list-style: none !important;
    margin-top: 10px !important;
    margin-left: 0 !important;
    transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out !important;
  }

  .custom-dropdown-menu.show {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
  }

  .custom-dropdown-menu::before {
    content: '' !important;
    position: absolute !important;
    top: -6px !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    border-left: 6px solid transparent !important;
    border-right: 6px solid transparent !important;
    border-bottom: 6px solid #fff !important;
  }

  .custom-dropdown-menu li {
    margin: 0 !important;
    padding: 0 !important;
    display: block !important;
    text-align: center !important;
  }

  .custom-dropdown-menu a {
    display: block !important;
    padding: 10px 20px !important;
    color: #333 !important;
    text-decoration: none !important;
    font-size: 0.95em !important;
    font-weight: 500 !important;
    transition: background 0.2s !important;
  }

  .custom-dropdown-menu a:hover {
    background-color: #f5f7fa !important;
    color: #000 !important;
  }

  .has-dropdown {
    position: relative !important;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translate(-50%, -10px); }
    to { opacity: 1; transform: translate(-50%, 0); }
  }

  .custom-dropdown-menu.show {
    animation: fadeIn 0.2s ease-in-out !important;
  }

  /* [필수] 상단바가 드롭다운을 가리지 않도록 설정 */
  .masthead, 
  .masthead__inner-wrap, 
  .greedy-nav, 
  .greedy-nav .visible-links,
  .greedy-nav__list {
    overflow: visible !important;
  }
  
  /* 드롭다운 메뉴 z-index 최상위로 보장 */
  .custom-dropdown-menu {
    z-index: 999999 !important;
  }
</style>

<script>
(function() {
  function setupPeopleDropdown() {
    // 모든 링크를 확인
    const allLinks = document.querySelectorAll('a');
    let peopleLink = null;
    let peopleItem = null;
    
    // People 링크 찾기
    for (let link of allLinks) {
      const text = link.textContent.trim();
      if (text === 'People') {
        peopleLink = link;
        // li 요소 찾기 (여러 방법 시도)
        peopleItem = link.closest('li');
        if (!peopleItem) {
          peopleItem = link.parentElement;
        }
        if (!peopleItem) {
          peopleItem = link.parentNode;
        }
        break;
      }
    }
    
    if (!peopleLink || !peopleItem) {
      // DOM이 아직 준비되지 않았을 수 있음
      return false;
    }
    
    // 이미 설정되어 있으면 스킵
    if (peopleItem.classList.contains('has-dropdown') && peopleItem.querySelector('.custom-dropdown-menu')) {
      return true;
    }
    
    // 클래스 추가
    peopleItem.classList.add('has-dropdown');
    peopleItem.style.position = 'relative';
    
    // 링크 기능 비활성화 (클릭 시 이동 방지)
    peopleLink.href = 'javascript:void(0);';
    peopleLink.style.cursor = 'pointer';
    
    // 클릭 이벤트 차단
    peopleLink.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      return false;
    });
    
    // 드롭다운 생성
    let dropdown = peopleItem.querySelector('.custom-dropdown-menu');
    if (!dropdown) {
      dropdown = document.createElement('ul');
      dropdown.className = 'custom-dropdown-menu';
      // 현재 페이지의 baseurl을 자동으로 감지
      const currentPath = window.location.pathname;
      let baseurl = '';
      if (currentPath.includes('/mars.github.io')) {
        baseurl = '/mars.github.io';
      }
      dropdown.innerHTML = '<li><a href="' + baseurl + '/students/">Students</a></li><li><a href="' + baseurl + '/alumni/">Alumni</a></li>';
      peopleItem.appendChild(dropdown);
    }

    // 호버 이벤트 처리
    let hoverTimeout = null;
    
    function showDropdown() {
      if (hoverTimeout) {
        clearTimeout(hoverTimeout);
        hoverTimeout = null;
      }
      if (dropdown) {
        dropdown.classList.add('show');
      }
    }
    
    function hideDropdown() {
      hoverTimeout = setTimeout(function() {
        if (dropdown) {
          dropdown.classList.remove('show');
        }
      }, 100); // 약간의 지연을 두어 드롭다운으로 이동할 시간 제공
    }
    
    // 이벤트 리스너 추가
    peopleItem.addEventListener('mouseenter', showDropdown);
    peopleItem.addEventListener('mouseleave', hideDropdown);
    peopleLink.addEventListener('mouseenter', showDropdown);
    
    if (dropdown) {
      dropdown.addEventListener('mouseenter', function() {
        if (hoverTimeout) {
          clearTimeout(hoverTimeout);
          hoverTimeout = null;
        }
        showDropdown();
      });
      dropdown.addEventListener('mouseleave', hideDropdown);
    }
    
    return true;
  }
  
  // 여러 시점에서 시도 (DOM이 완전히 로드될 때까지)
  function initDropdown() {
    if (setupPeopleDropdown()) {
      return;
    }
    // 실패하면 잠시 후 재시도
    setTimeout(function() {
      if (!setupPeopleDropdown()) {
        // 최종 재시도
        setTimeout(setupPeopleDropdown, 500);
      }
    }, 100);
  }
  
  // DOMContentLoaded에서 실행
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initDropdown);
  } else {
    // 이미 로드된 경우 즉시 실행
    initDropdown();
  }
  
  // window.onload에서도 한 번 더 시도 (모든 리소스 로드 후)
  window.addEventListener('load', function() {
    setTimeout(setupPeopleDropdown, 100);
  });
})();
</script>
